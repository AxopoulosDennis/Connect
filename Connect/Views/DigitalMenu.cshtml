@using Connect.Models;
@using System.Globalization
@using Umbraco.Cms.Core.Models;
@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage;
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@using Umbraco.Cms.Core.Models.Blocks;

@{
    var type = Model.ContentType.Alias ?? "";
    switch (type)
    {
        case "digitalMenu":
            Layout = "Layouts/DigitalMenu";
            break;
        default:
            Layout = "";
            break;
    }

    

    var triggerColor = Model?.Value("aboutTriggerColor") ?? "ffffff";
    var menuSections = Model?.Value<IEnumerable<BlockListItem>>("menuSections");
    if (menuSections?.Any() ?? false)
    {
        menuSections = menuSections.Where(x => !x.Content.Value<bool>("hide"));
    }

}


<div class="main-content-page">

    <div class="inner-content">
        
        <!-- COVER IMAGE AND BRAND IMAGE -->
        <partial name="Partials/_Cover" />

        <section class="content-container">

            <!-- SOCIAL MEDIA & PROMO TEXT -->
            <partial name="Partials/_Social" />
            @if (menuSections?.Any() ?? false)
            {
                var counter = 0;

            <!-- MENU NAVIGATION -->
            <div class="menu-navigation-bg sticky" id="menuNav">


                    <div class="menu-navigation-container">


                        <nav class="nav swiper mySwiper">
                            <ul class="navigation-list swiper-wrapper">

                                @foreach (var section in menuSections)
                                {
                                    counter++;
                                    var sectionName = section.Content.Value<string>("sectionName") ?? "";

                                    if (section == menuSections.First())
                                    {
                                        <li class="nav-item swiper-slide">
                                            <a href="#" data-link="#category_@counter" class="nav-link active">@sectionName</a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="nav-item swiper-slide">
                                            <a href="#" data-link="#category_@counter" class="nav-link">@sectionName</a>
                                        </li>
                                    }
                                }

                            </ul>
                        </nav>
                    </div>



            </div>

            }

            <!-- MENU CONTENT -->
            <div class="menu-container">
                @if (menuSections?.Any() ?? false)
                {
                    var counter = 0;
                    var outOfStockCounter = 0;

                    @foreach (var section in menuSections.Where(x=> x.Content.Value<bool>("hide") == false))
                    {
                        counter++;

                        var catName = section.Content.Value<string>("sectionName") ?? "";
                        var catIcon = section.Content.Value<IPublishedContent>("groupIcon")?.MediaUrl() ?? "";

                        if(section.Content.ContentType.Alias == "menuSections")
                        {
                            var sectionItems = section.Content.Value<IEnumerable<BlockListItem>>("sectionItems");
                            var link = "cat_" + counter;

                            if (sectionItems?.Any() ?? false)
                            {
                                var outOfStockItems = sectionItems.Where(x => x.Content.Value<bool>("outOfStock") == true);

                                sectionItems = sectionItems.Where(x => x.Content.Value<bool>("outOfStock") == false);

                                <div class="category" id="category_@counter">
                                    <div class="heading-icon-container">
                                        @if (!string.IsNullOrEmpty(catIcon))
                                        {
                                            <image class="heading-icon" src="@catIcon"></image>
                                        }
                                        <h2 class="heading">@catName</h2>
                                    </div>

                                <div class="products-container">

                                    @foreach (var product in sectionItems)
                                    {
                                        var productName = product.Content.Value<string>("itemName") ?? "";
                                        var productDesc = product.Content.Value<string>("itemDescription") ?? "";
                                        var productPhotos = product.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                        var alias = product.Content.ContentType.Alias;
                                        decimal originalPrice = product.Content.Value<decimal>("originalPrice");
                                        string discountType = product.Content.Value<string>("discountType") ?? "";
                                        bool hasVariations = false;
                                        bool activateDiscount = product.Content.Value<bool>("activateDiscount");

                                        decimal discountAmount = product.Content.Value<decimal>("discountAmount");
                                        decimal finalPrice = originalPrice;

                                        var className = "";
                                        if(string.IsNullOrEmpty(productDesc))
                                        {
                                                className = "no-desc";
                                        }

                                        if (discountType == "Final Price")
                                        {
                                            finalPrice = discountAmount;
                                        }
                                        else if (discountType == "Fixed Price")
                                        {
                                            finalPrice = originalPrice - discountAmount;

                                        }
                                        else if (discountType == "Percentage")
                                        {
                                            var discountPercentage = (discountAmount / 100) * (originalPrice / 1);
                                            finalPrice = Math.Ceiling((finalPrice - discountPercentage) * 20) / 20;

                                        }



                                        @if (alias == "beerBeverage")
                                        {
                                            if (product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations")?.Any() ?? false)
                                            {
                                                hasVariations = true;
                                            }

                                        }

                                        var variationsCounter = 0;

                                        if (hasVariations == false)
                                        {
                                            <div class="product"
                                                 data-name="@productName"
                                                 data-desc="@productDesc"
                                                 data-original-price="@originalPrice"
                                                 data-final-price="@finalPrice"
                                                 data-activate-discount="@activateDiscount">

                                                <div class="text-photo-container">
                                                        <div class="product-info @className">

                                                        <div class="product-text">

                                                            <h3>@productName</h3>
                                                            @if (!string.IsNullOrEmpty(productDesc))
                                                            {
                                                                <p>@productDesc</p>
                                                            }
                                                        </div>

                                                        <div class="product-price">
                                                            @if (!string.IsNullOrEmpty(discountType) && activateDiscount)
                                                            {


                                                                <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                            }
                                                            else
                                                            {
                                                                <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                            }
                                                        </div>




                                                    </div>
                                                    @if (productPhotos?.Any() ?? false)
                                                    {
                                                        var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                        <div class="product-photo-container">
                                                            <img src="@mainPhoto" class="product-photo">
                                                        </div>
                                                    }

                                                </div>

                                                @if (alias == "beerBeverage")
                                                {
                                                    decimal? alc = product.Content.Value<decimal>("alcohol");
                                                    int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                    int? ml = product.Content.Value<int>("millilitre");

                                                    <div class="tags-container" data-filters-type="beer">

                                                        <span class="tag" data-abv="@alc">
                                                            @alc% ABV
                                                        </span>
                                                        <span class="tag" data-ibu="@ibu">
                                                            @ibu IBU
                                                        </span>


                                                    </div>
                                                }
                                            </div>

                                        }
                                        else
                                        {
                                            IEnumerable<BlockListItem> variations = null;

                                            <div class="product">
                                                <div class="text-photo-container">
                                                    <div class="product-text">
                                                        <h3>@productName</h3>
                                                        @if (!string.IsNullOrEmpty(productDesc))
                                                        {
                                                            <p>@productDesc</p>
                                                        }

                                                        <div class="swiper-container tabs-buttons">
                                                            <div class="swiper-wrapper">
                                                                @if (alias == "beerBeverage")
                                                                {
                                                                    decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                    int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                    int? mainMl = product.Content.Value<int>("millilitre");
                                                                    variations = product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations");

                                                                    <div class="swiper-slide active-tab">@mainMl ml</div>

                                                                    @foreach (var item in variations)
                                                                    {
                                                                        var ml = item.Content.Value<decimal>("millilitre");
                                                                        <div class="swiper-slide">@ml ml</div>
                                                                    }

                                                                }


                                                            </div>
                                                            <!--   <div class="swiper-scrollbar"></div> -->
                                                        </div>

                                                        <div class="swiper-container tabs-content">
                                                            <div class="swiper-wrapper">

                                                                @if (alias == "beerBeverage")
                                                                {
                                                                    <div class="swiper-slide swiper-slide-active">
                                                                        @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                        {

                                                                            <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                        }
                                                                    </div>

                                                                    @foreach (var item in variations)
                                                                    {
                                                                        decimal variationOriginalPrice = item.Content.Value<decimal>("originalPrice");
                                                                        string variationDiscountType = item.Content.Value<string>("discountType") ?? "";

                                                                        @if (!string.IsNullOrEmpty(discountType))
                                                                        {
                                                                            decimal vDiscountAmount = item.Content.Value<decimal>("discountAmount");

                                                                            decimal vFinalPrice = variationOriginalPrice;

                                                                            if (discountType == "Final Price")
                                                                            {
                                                                                vFinalPrice = vDiscountAmount;
                                                                            }
                                                                            else if (discountType == "Fixed Price")
                                                                            {
                                                                                vFinalPrice = variationOriginalPrice - vDiscountAmount;

                                                                            }
                                                                            else if (discountType == "Percentage")
                                                                            {
                                                                                var discountPercentage = (vDiscountAmount / 100) * (originalPrice / 1);
                                                                                vFinalPrice = Math.Ceiling((vFinalPrice - discountPercentage) * 20) / 20;

                                                                            }

                                                                            <div class="swiper-slide">
                                                                                <p class="final-price has-discount">@vFinalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>
                                                                            </div>


                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="swiper-slide">
                                                                                <p class="final-price">@variationOriginalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                            </div>
                                                                        }


                                                                    }

                                                                }

                                                            </div>
                                                        </div>

                                                    </div>
                                                    @if (productPhotos?.Any() ?? false)
                                                    {
                                                        var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                        <div class="product-photo-container">
                                                            <img src="@mainPhoto" class="product-photo">
                                                        </div>
                                                    }

                                                </div>

                                                @if (alias == "beerBeverage")
                                                {
                                                    decimal? alc = product.Content.Value<decimal>("alcohol");
                                                    int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                    int? ml = product.Content.Value<int>("millilitre");

                                                    <div class="tags-container" data-filters-type="beer">

                                                        <span class="tag" data-abv="@alc">
                                                            @alc% ABV
                                                        </span>
                                                        <span class="tag" data-ibu="@ibu">
                                                            @ibu IBU
                                                        </span>


                                                    </div>
                                                }
                                            </div>

                                        }
                                    }

                                    @if(outOfStockItems?.Any() ?? false)
                                    {

                                            <div class="out-of-stock-items collapsed" data-index="@outOfStockCounter" data-bs-toggle="collapse" href="#out-of-stock-section-@counter" role="button" aria-expanded="false" aria-controls="out-of-stock-section-@counter">
                                            <span class="num-not-available">@outOfStockItems.Count()</span>
                                            <span class="not-available-text">μη διαθέσιμα προϊόντα</span>
                                            <span class="dropdown-icon" >
                                                <i class="fas fa-chevron-down" aria-hidden="true"></i>
                                            </span>
             
                                        </div>

                                           
                                                outOfStockCounter++;
                                            


                                            <div class="collapse" id="out-of-stock-section-@counter">
                                                <div class="out-of-stock-container">
                                                    <div class="out-of-stock-swiper">
                                                        <div class="swiper-wrapper">
                                                            @foreach (var item in outOfStockItems)
                                                            {
                                                                var productName = item.Content.Value<string>("itemName") ?? "";
                                                                var productDesc = item.Content.Value<string>("itemDescription") ?? "";
                                                                var productPhotos = item.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                                                var alias = item.Content.ContentType.Alias;
                                                                decimal originalPrice = item.Content.Value<decimal>("originalPrice");
                                                                var className = "";
                                                                if (string.IsNullOrEmpty(productDesc))
                                                                {
                                                                    className = "no-desc";
                                                                }

                                                                <div class="swiper-slide">
                                                                    <div class="out-of-stock-product">

                                                                        <div class="text-photo-container out-of-stock">
                                                                            <div class="product-info @className out-of-stock">

                                                                                <div class="product-text">

                                                                                    <h3>@productName</h3>
                                                                                    @if (!string.IsNullOrEmpty(productDesc))
                                                                                    {
                                                                                        <p>@productDesc</p>
                                                                                    }
                                                                                </div>

                                                                                <div class="product-price">
                                                                                    <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                                </div>




                                                                            </div>
                                                                            @if (productPhotos?.Any() ?? false)
                                                                            {
                                                                                var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                                                <div class="product-photo-container">
                                                                                    <img src="@mainPhoto" class="product-photo">
                                                                                </div>
                                                                            }

                                                                        </div>


                                                                    </div>
                                                                </div>
                                                            }


                                                        </div>
                                                        <div class="swiper-scrollbar"></div>
                                                    </div>
                                                </div>

                                            </div>

                                    }
                                </div>

                                </div>
                            }


                        }
                        else
                        {
                            var subSections = section.Content.Value<IEnumerable<BlockListItem>>("subSections");
                            if (subSections?.Any() ?? false)
                            {
                                var subCount = 0;
                                var firstItemCounter = 0;

                                <div class="category" id="category_@counter">
                                    <div class="heading-icon-container">
                                        @if (!string.IsNullOrEmpty(catIcon))
                                        {
                                            <image class="heading-icon" src="@catIcon"></image>
                                        }
                                        <h2 class="heading">@catName</h2>
                                    </div>


                                    @foreach (var subSection in subSections.Where(x => x.Content.Value<bool>("hide") == false))
                                    {
                                        firstItemCounter++;
                                        subCount++;
                                        var sectionItems = subSection.Content.Value<IEnumerable<BlockListItem>>("sectionItems");
                                        var link = "cat_" + counter + "_sub_" + subCount;

                                        if (sectionItems?.Any() ?? false)
                                        {
                                            bool hideName = subSection.Content.Value<bool>("hideName");

                                            if (!hideName)
                                            {
                                                var subSectionName = subSection.Content.Value<string>("subSectionName") ?? "";

                                                var borderClass = "";
                                                if (firstItemCounter == 1)
                                                {
                                                    borderClass = "no-top-border";
                                                }

                                                <div class="sub-cat-name-container @borderClass" id="@link">
                                                    <div class="border-container">
                                                        <h2 class="heading">@subSectionName</h2>

                                                    </div>
                                                </div>

                                            }
                                            else
                                            {
                                                <div class="sub-cat-empty">
                                                </div>
                                            }



                                            <div class="products-container">

                                                @foreach (var product in sectionItems)
                                                {
                                                    var productName = product.Content.Value<string>("itemName") ?? "";
                                                    var productDesc = product.Content.Value<string>("itemDescription") ?? "";
                                                    var productPhotos = product.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                                    var alias = product.Content.ContentType.Alias;
                                                    decimal originalPrice = product.Content.Value<decimal>("originalPrice");
                                                    string discountType = product.Content.Value<string>("discountType") ?? "";
                                                    bool hasVariations = false;

                                                    decimal discountAmount = product.Content.Value<decimal>("discountAmount");
                                                    decimal finalPrice = originalPrice;

                                                    if (discountType == "Final Price")
                                                    {
                                                        finalPrice = discountAmount;
                                                    }
                                                    else if (discountType == "Fixed Price")
                                                    {
                                                        finalPrice = originalPrice - discountAmount;

                                                    }
                                                    else if (discountType == "Percentage")
                                                    {
                                                        var discountPercentage = (discountAmount / 100) * (originalPrice / 1);
                                                        finalPrice = Math.Ceiling((finalPrice - discountPercentage) * 20) / 20;

                                                    }



                                                    @if (alias == "beerBeverage")
                                                    {
                                                        if (product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations")?.Any() ?? false)
                                                        {
                                                            hasVariations = true;
                                                        }



                                                    }

                                                    var variationsCounter = 0;

                                                    if (hasVariations == false)
                                                    {
                                                        <div class="product"
                                                             data-name="@productName"
                                                             data-desc="@productDesc"
                                                             data-original-price="@originalPrice"
                                                             data-final-price="@finalPrice">

                                                            <div class="text-photo-container">
                                                                <div class="product-text">
                                                                    <h3>@productName</h3>
                                                                    @if (!string.IsNullOrEmpty(productDesc))
                                                                    {
                                                                        <p>@productDesc</p>
                                                                    }

                                                                    @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                    {


                                                                        <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                    }
                                                                    else
                                                                    {
                                                                        <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                    }

                                                                </div>
                                                                @if (productPhotos?.Any() ?? false)
                                                                {
                                                                    var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                                    <div class="product-photo-container">
                                                                        <img src="@mainPhoto" class="product-photo">
                                                                    </div>
                                                                }

                                                            </div>

                                                            @if (alias == "beerBeverage")
                                                            {
                                                                decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                int? ml = product.Content.Value<int>("millilitre");

                                                                <div class="tags-container" data-filters-type="beer">

                                                                    <span class="tag" data-abv="@alc">
                                                                        @alc% ABV
                                                                    </span>
                                                                    <span class="tag" data-ibu="@ibu">
                                                                        @ibu IBU
                                                                    </span>


                                                                </div>
                                                            }
                                                        </div>

                                                    }
                                                    else
                                                    {
                                                        IEnumerable<BlockListItem> variations = null;

                                                        <div class="product">
                                                            <div class="text-photo-container">
                                                                <div class="product-text">
                                                                    <h3>@productName</h3>
                                                                    @if (!string.IsNullOrEmpty(productDesc))
                                                                    {
                                                                        <p>@productDesc</p>
                                                                    }

                                                                    <div class="swiper-container tabs-buttons">
                                                                        <div class="swiper-wrapper">
                                                                            @if (alias == "beerBeverage")
                                                                            {
                                                                                decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                                int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                                int? mainMl = product.Content.Value<int>("millilitre");
                                                                                variations = product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations");

                                                                                <div class="swiper-slide active-tab">@mainMl ml</div>

                                                                                @foreach (var item in variations)
                                                                                {
                                                                                    var ml = item.Content.Value<decimal>("millilitre");
                                                                                    <div class="swiper-slide">@ml ml</div>
                                                                                }

                                                                            }


                                                                        </div>
                                                                        <!--   <div class="swiper-scrollbar"></div> -->
                                                                    </div>

                                                                    <div class="swiper-container tabs-content">
                                                                        <div class="swiper-wrapper">

                                                                            @if (alias == "beerBeverage")
                                                                            {
                                                                                <div class="swiper-slide swiper-slide-active">
                                                                                    @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                                    {

                                                                                        <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                                    }
                                                                                </div>

                                                                                @foreach (var item in variations)
                                                                                {
                                                                                    decimal variationOriginalPrice = item.Content.Value<decimal>("originalPrice");
                                                                                    string variationDiscountType = item.Content.Value<string>("discountType") ?? "";

                                                                                    @if (!string.IsNullOrEmpty(discountType))
                                                                                    {
                                                                                        decimal vDiscountAmount = item.Content.Value<decimal>("discountAmount");

                                                                                        decimal vFinalPrice = variationOriginalPrice;

                                                                                        if (discountType == "Final Price")
                                                                                        {
                                                                                            vFinalPrice = vDiscountAmount;
                                                                                        }
                                                                                        else if (discountType == "Fixed Price")
                                                                                        {
                                                                                            vFinalPrice = variationOriginalPrice - vDiscountAmount;

                                                                                        }
                                                                                        else if (discountType == "Percentage")
                                                                                        {
                                                                                            var discountPercentage = (vDiscountAmount / 100) * (originalPrice / 1);
                                                                                            vFinalPrice = Math.Ceiling((vFinalPrice - discountPercentage) * 20) / 20;

                                                                                        }

                                                                                        <div class="swiper-slide">
                                                                                            <p class="final-price has-discount">@vFinalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>
                                                                                        </div>


                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <div class="swiper-slide">
                                                                                            <p class="final-price">@variationOriginalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                                        </div>
                                                                                    }


                                                                                }

                                                                            }

                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                @if (productPhotos?.Any() ?? false)
                                                                {
                                                                    var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                                    <div class="product-photo-container">
                                                                        <img src="@mainPhoto" class="product-photo">
                                                                    </div>
                                                                }

                                                            </div>

                                                            @if (alias == "beerBeverage")
                                                            {
                                                                decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                int? ml = product.Content.Value<int>("millilitre");

                                                                <div class="tags-container" data-filters-type="beer">

                                                                    <span class="tag" data-abv="@alc">
                                                                        @alc% ABV
                                                                    </span>
                                                                    <span class="tag" data-ibu="@ibu">
                                                                        @ibu IBU
                                                                    </span>


                                                                </div>
                                                            }
                                                        </div>

                                                    }
                                                }

                                            </div>
                                        }

                                    }

                                </div>

                            }

                        }



                    }
                }
            </div>

        </section>

        <section class="tonny">
            <a href="/" target="_blank" class="tony-homepage"><h1>tonny.gr - Digital Menu Solutions</h1></a>
        </section>


        <section class="bottom-container" id="bottomContainer">
@*             <partial name="Partials/_BottomNavigation" />
 *@

            <!-- SEARCH TRIGGER -->
            <div class="bottom-search-bg" id="bottomSearch">
                <div class="bottom-search-container">
                    <div class="search-row">
                        <div class="row-inner">
                            <div class="container">
                                <div class="search-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#657789" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></svg>
                                </div>
                                <div class="input-container">
                                    <input id="searchInput" placeholder="Αναζήτηση..." />
                                </div>

                                <div class="close-icon-container" id="closeFullScreen">
                                    <i class="fa fa-close close-icon"></i>

                                </div>



                            </div>
                        </div>
                    </div>

                    <div id="whiteSpaceLove" style="height:1px;"></div>
                </div>
            </div>
        </section>

    </div>
 
</div>

<div class="item-info">

    <div class="top-cover">
        <span class="close-container" id="close-item">
            <i class="fa fa-close fa-lg"></i>
        </span>
        <div class="cover-container">
            <div class="cover-image-container">

                <img class="cover-image" src="~/images/cocktail-4.jpg" />
            </div>
        </div>
    </div>

    <div class="product-text-container">
        <div class="product-text">
            <div class="desctiption-container">
                <h3>MOJITO</h3>
                <p>
                    A fine Beer Excellent Quality
                    For Heavy Drinkers, Drink with Caution
                </p>
            </div>


            <div class="ingridients-container">
                <h3 class="caption">TAGS</h3>
                <div class="price-container">

                </div>
                <div class="tags-container">

                </div>
            </div>
        </div>

    </div>

</div>

@{
    var events = Model?.Value<IEnumerable<BlockListItem>>("events");

}

<div id="brand-info-content">
    <span class="close-container" id="close-info">
        <i class="fa fa-close fa-lg"></i>
    </span>

    @if (events?.Any() ?? false)
    {
        events = events.Where(x => !x.Content.Value<bool>("hide") && x.Content.Value<DateTime>("eventStart") > DateTime.Now);

        if(events?.Any() ?? false)
        {
            <div class="info-item-container">

                <span class="upcoming-title">
                    Εκδηλώσεις Προσεχώς
                </span>

                 <div class="events-swiper">
                        <div class="swiper-wrapper">
                        @foreach (var e in events)
                        {
                            string eventName = e?.Content?.Value<string>("eventName") ?? "";
                            string eventDesc = e?.Content?.Value<string>("eventDescription") ?? "";
                            var eventPhoto = e?.Content?.Value<IPublishedContent>("eventPhoto")?.MediaUrl() ?? "";
                            var eventStart = e?.Content?.Value<DateTime>("eventStart");
                            var eventEnd = e?.Content?.Value<DateTime>("eventEnd");
                            var cancelledClass = "";
                            if(e?.Content?.Value<bool>("cancelled") == true)
                            {
                                cancelledClass = "cancelled";
                            }
                            @if(!string.IsNullOrEmpty(eventPhoto))
                                {
                                    <div class="swiper-slide event @cancelledClass">
                                        <div class="photo-container">
                                            <img src="@eventPhoto" class="event-photo"/>
                                        </div>

                                        <div class="event-info">
                                        @if(eventStart != null && eventEnd != null)
                                        {
                                            <div class="event-time">
                                                <span class="event-start">
                                                    @eventStart?.ToString("ddd, dd MMM HH:mm")
                                                </span>
                                                @Html.Raw("<p> &nbsp; - &nbsp; </p>")
                                                <span class="event-end">
                                                    @eventEnd?.ToString("ddd, dd MMM HH:mm")
                                                </span>
                                            </div>
                                            <div class="event-about">
                                                <span class="event-name">@eventName</span>
                                                <span class="event-desc">@Html.Raw(eventDesc)</span>
                                            </div>

                                        }

                                        </div>
                                    </div>
                                }

                            }




                        </div>
                    <div class="swiper-pagination"></div>
                </div>

                
            </div>

        }

    }

    @{
        bool showStandardHours = (Model?.Value<bool>("showStandardHours") ?? false);
        bool showSpecialHours = (Model?.Value<bool>("showSpecialHours") ?? false);

    }

    @if (showStandardHours == true || showSpecialHours == true)
    {
        <div class="info-item-container">
            <span class="upcoming-title">
                Ώράριο λειτουργίας
            </span>
            @if (showStandardHours)
            {
                var standardHours = Model?.Value<IEnumerable<OpenOrClosed.Core.ViewModels.DaysViewModel>>("standardHours");
                if(standardHours != null)
                {
                
                  <table class="table table-striped table table-bordered opening-hours">
                  <thead>
                        <tr>
                            <th scope="col">Ημέρα</th>
                            <th scope="col">Ώρες</th>
                        </tr>
                  </thead>
                  <tbody class="table table-striped">

                        @foreach (var day in standardHours)
                        {
                            if(day != null)
                            {
                                    <tr>
                                        <td>
                                            @day.DayOfTheWeek

                                        </td>
                                        @if(day.IsOpen)
                                        {
                                            foreach (var hours in day.HoursOfBusiness)
                                            {
                                                if (hours.OpensAt != null && hours.ClosesAt != null)
                                                {
                                                    <td>
                                                        @hours?.OpensAt?.ToString("HH:mm") <text> - </text>@hours?.ClosesAt?.ToString("HH:mm") <br />
                                                    </td>
                                                }


                                            }
                                        }
                                        else
                                        {
                                            <td class="closed-text">Κλειστό</td>
                                        }
                                    </tr>
                            }

                         }

                  </tbody>
                </table>
                }

            }


        </div>
    }



</div>
