@using Connect.Models;
@using System.Globalization
@using Umbraco.Cms.Core.Models;
@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage;
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@using Umbraco.Cms.Core.Models.Blocks;

@{
    Layout = "Layouts/DigitalMenu";


    var triggerColor = Model?.Value("aboutTriggerColor") ?? "ffffff";
    var menuSections = Model?.Value<IEnumerable<BlockListItem>>("menuSections");
    if (menuSections?.Any() ?? false)
    {
        menuSections = menuSections.Where(x => !x.Content.Value<bool>("hide"));
    }
    var bName = Model?.Value<string>("brandName") ?? "";
    bool hideDealsGroup = Model?.Value<bool>("hideDealsGroup") ?? true;
    var dealItems = Model?.Value<IEnumerable<BlockListItem>>("dealItem")?.Where(x => x.Content.Value<bool>("hide") == false);
    var home = Umbraco.ContentAtRoot().
         Where(x => x.IsDocumentType("digitalMenu")).FirstOrDefault();

    var themeColor = "#" + Model?.Value<string>("navigationAndTagsColor");

    var isDemo = Model?.Value<bool>("isDemo") ?? false;
    string enableOrders = Model?.Value<bool>("enableOrders").ToString() ?? "false";
    var pageId = Model?.Id;

    decimal biggestPrice = 0;
    decimal smallestPrice = 0;
}


<input type="hidden" id="themeColor"  value="@themeColor"/>
<input type="hidden" id="pageId" value="@pageId" />


<div class="qr-code">
    @Html.AntiForgeryToken()

    <div class="bg-container"></div>
    <div class="container">
        <div class="text-container">
            Η ομάδα του<a href="https://tonny.gr"> tonny.gr </a>δουλεύει σκληρά να κάνει την εφαρμογή διαθέσιμη και σε υπολογιστές.
            Ως τότε μπορείς να σκανάρεις το QR άπο το κινητό ή το tablet σου και να δέις την σελίδα του καταστήματος <span class="brand-name">@bName</span>.
        </div>
        <div class="qr-container">
        </div>
    </div>
    <div class="bg-container-2"></div>

</div>

<div class="outer-body">


    <div class="loader__container">
        <span class="loader"></span>

        <style>
            .loader::before {
                content: "";
                box-sizing: border-box;
                position: absolute;
                inset: 0px;
                border-radius: 50%;
                border: 5px solid @themeColor;
                animation: prixClipFix 3s linear infinite;
            }
        </style>
    </div>


    <div class="inner-body" style="display:none">


        <div class="main-content-page" id="mainPage">

            <div class="inner-content">

                <div class="brand-container">
                    <!-- COVER IMAGE AND BRAND IMAGE -->
                    <partial name="Partials/_Cover" />
                    <!-- SOCIAL MEDIA & PROMO TEXT -->
                    <partial name="Partials/_Social" />
                </div>


                <div class="content-container">


                    @if (menuSections?.Any() ?? false)
                    {
                        var menuCounter = 0;

                        <!-- MENU NAVIGATION -->
                        <div class="menu-navigation-bg sticky" id="menuNav">
                            <div class="search-container" id="search-trigger">
                                <div class="search-icon" id="open-search-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#657789" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></svg>
                                </div>
                                <div class="close-icon" id="close-search-icon">
                                    <i class="fa fa-close"></i>
                                </div>
                            </div>

                            <div class="search-placeholder">
                                <div class="input-container">
                                    <input id="searchInput" placeholder="Αναζήτηση..." style="background-color:@themeColor" />
                                </div>
                            </div>

                            <div class="menu-navigation-container" style="background-color:@themeColor;">


                                <nav class="nav swiper mySwiper">
                                    <ul class="navigation-list swiper-wrapper">

                                        @if (!hideDealsGroup)
                                        {

                                            if (dealItems?.Any() ?? false)
                                            {
                                                menuCounter++;
                                                var groupName = Model?.Value<string>("dealsGroupName") ?? "";

                                                <li class="nav-item swiper-slide">
                                                    <a href="#" data-link="#category_@menuCounter" class="nav-link active">@groupName</a>
                                                </li>
                                            }
                                        }
                                        @foreach (var section in menuSections)
                                        {
                                            menuCounter++;
                                            var sectionName = section.Content.Value<string>("sectionName") ?? "";

                                            if ((dealItems?.Any() ?? false) == false)
                                            {
                                                if (section == menuSections.First())
                                                {
                                                    <li class="nav-item swiper-slide">
                                                        <a href="#" data-link="#category_@menuCounter" class="nav-link active">@sectionName</a>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li class="nav-item swiper-slide">
                                                        <a href="#" data-link="#category_@menuCounter" class="nav-link">@sectionName</a>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li class="nav-item swiper-slide">
                                                    <a href="#" data-link="#category_@menuCounter" class="nav-link">@sectionName</a>
                                                </li>
                                            }


                                        }

                                    </ul>
                                </nav>
                            </div>

                        </div>

                        <div class="filters__container" id="filtersContainer" style="display:none;">
                            <div class="filter">

                                <div class="trigger__container" filter-type="price-range" data-bs-toggle="modal" data-bs-target="#priceRangeModal">
                                    @(Umbraco.GetDictionaryValue("PriceRange", "Price Range"))
                                    <i class="fa-solid fa-coins"></i>

                                </div>

                                <div class="price__range__container" style="display:none;" id="priceRangeValContainer">

                                <span class="range__val" id="priceRangeVal">
                                </span>

                                <span class="close__icon" id="removePriceFilter"><i class="fa fa-close"></i>
                                </span>

                                </div>
                            </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="priceRangeModal" aria-hidden="true" tabindex="-1" aria-labelledby="priceRangeModalLabel">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title" id="priceRangeModalLabel">
                                            @(Umbraco.GetDictionaryValue("PriceRange", "Price Range"))
                                        </h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="wrapper">

                                            <div class="price-input">
                                                <div class="field">
                                                    <span>@(Umbraco.GetDictionaryValue("MinPriceRange", "Min"))</span>
                                                    <input type="number" class="input-min" id="input-min" value="@smallestPrice">
                                                </div>
                                                <div class="separator">-</div>
                                                <div class="field">
                                                    <span>@(Umbraco.GetDictionaryValue("MaxPriceRange", "Max"))</span>
                                                    <input type="number" class="input-max" id="input-max" value="@biggestPrice">
                                                </div>
                                            </div>
                                            <div class="slider">
                                                <div class="progress"></div>
                                            </div>
                                            <div class="range-input">
                                                <input type="range" class="range-min" min="@smallestPrice" id="rangeMin" max="@biggestPrice" value="@smallestPrice" step="1">
                                                <input type="range" class="range-max" min="@smallestPrice+1" id="rangeMax" max="@biggestPrice" value="@biggestPrice - 1" step="1">
                                            </div>
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" id="acceptPriceFilter" data-bs-dismiss="modal" class="btn btn-primary">@(Umbraco.GetDictionaryValue("SubmitPriceRange", "Submit"))</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <style>
                            .slider .progress {
                                height: 100%;
                                left: 0%;
                                right: 0%;
                                position: absolute;
                                border-radius: 5px;
                                background: transparent;
                            }
                        </style>
                    }

                    <!-- MENU CONTENT -->
                    <div class="menu-container">
                        @{
                            int productIndex = 0;
                            var counter = 0;

                        }


                        @if (!hideDealsGroup)
                        {
                            var groupIcon = Model?.Value<IPublishedContent>("groupIcon")?.MediaUrl() ?? "";
                            var groupName = Model?.Value<string>("dealsGroupName") ?? "";

                            if (dealItems?.Any() ?? false)
                            {
                                counter++;

                                <div class="category extra-space deals" id="category_@counter" data-section-name="@groupName">

                                    <div class="heading-icon-container">
                                        @if (!string.IsNullOrEmpty(groupIcon))
                                        {
                                            <image class="heading-icon" src="@groupIcon"></image>
                                        }
                                        <h2 class="heading">@groupName</h2>
                                    </div>

                                    <div class="swiper swiperSpecials">
                                        <div class="swiper-wrapper">
                                            @foreach (var product in dealItems)
                                            {

                                                var dealName = product?.Content?.Value<string>("dealName") ?? "";
                                                var dealPhoto = product?.Content?.Value<IPublishedContent>("dealPhoto")?.MediaUrl() ?? "";
                                                var dealDescription = product?.Content?.Value<string>("dealDescription") ?? "";
                                                var finalPrice = product?.Content?.Value<decimal>("finalPrice") ?? 0;
                                                var originalPrice = product?.Content?.Value<decimal>("originalPrice") ?? 0;
                                                var activateDiscount = product?.Content?.Value<bool>("activateDiscount") ?? false;
                                                var hasPrice = originalPrice > 0;

                                                <div class="swiper-slide product"
                                                     data-category="category_@counter"
                                                     data-real-cat-index="@counter"
                                                     data-product-index="@productIndex"
                                                     data-desc="@dealDescription"
                                                     data-name="@dealName"
                                                     data-photo="@dealPhoto"
                                                     data-original-price="@originalPrice.ToString("F2")&#8364"
                                                     data-final-price="@finalPrice.ToString("F2")&#8364"
                                                     data-is-deals="True"
                                                     data-activate-discount="@activateDiscount"
                                                     data-has-price="@hasPrice"
                                                     role="button">

                                                    @{
                                                        productIndex++;
                                                    }

                                                    <div class="photo__caption">
                                                        <div class="badge__container">
                                                            @if (!string.IsNullOrEmpty(dealPhoto))
                                                            {
                                                                <img src="@dealPhoto" class="product__photo" />
                                                            }
                                                            <div class="special__prices">
                                                                @if (product.Content.ContentType.Alias == "priceDealItem")
                                                                {
                                                                    @if (activateDiscount && finalPrice != null && finalPrice > 0)
                                                                    {


                                                                        <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364</p>

                                                                    }
                                                                    else
                                                                    {
                                                                        <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                    }


                                                                }
                                                                else if (product.Content.ContentType.Alias == "textDealItem")
                                                                {
                                                                    var dealText = product?.Content?.Value<string>("text") ?? "";
                                                                    <div class="price__badge"><span class="final-price">@dealText</span></div>

                                                                }
                                                            </div>
                                                        </div>
                                                        <div class="caption">
                                                            <p>@dealName</p>
                                                        </div>
                                                    </div>
                                                </div>

                                                @if(activateDiscount && finalPrice > 0 && finalPrice > biggestPrice)
                                                {
                                                    biggestPrice = finalPrice;


                                                }
                                                else if(originalPrice > biggestPrice)
                                                {
                                                    biggestPrice = originalPrice;                                          
                                                }


                                                if(smallestPrice == 0)
                                                {
                                                    if(activateDiscount && finalPrice > 0)
                                                    {
                                                        smallestPrice = finalPrice;
                                                    }
                                                    else
                                                    {
                                                        smallestPrice = originalPrice;
                                                    }
                                                }
                                                else
                                                {
                                                    if (activateDiscount && finalPrice > 0)
                                                    {
                                                        if(finalPrice < smallestPrice)
                                                        {
                                                            smallestPrice = finalPrice;

                                                        }
                                                    }
                                                    else
                                                    {
                                                        if(originalPrice < smallestPrice)
                                                        {
                                                            smallestPrice = finalPrice;

                                                        }                                                    }
                                                }

                                            }
                                        </div>
                                    </div>
                                </div>
                            }
                        }


                        @if (menuSections?.Any() ?? false)
                        {
                            var outOfStockCounter = 0;

                            @foreach (var section in menuSections.Where(x => x.Content.Value<bool>("hide") == false))
                            {
                                counter++;

                                var catName = section.Content.Value<string>("sectionName") ?? "";
                                var catIcon = section.Content.Value<IPublishedContent>("groupIcon")?.MediaUrl() ?? "";

                                if (section.Content.ContentType.Alias == "menuSections")
                                {
                                    var sectionItems = section.Content.Value<IEnumerable<BlockListItem>>("sectionItems");
                                    var link = "cat_" + counter;
                                    var sectionKey = section.Content.Key;

                                    if (sectionItems?.Any() ?? false)
                                    {
                                        var outOfStockItems = sectionItems.Where(x => x.Content.Value<bool>("outOfStock") == true);

                                        sectionItems = sectionItems.Where(x => x.Content.Value<bool>("outOfStock") == false);
                                        productIndex = 0;

                                        <div class="category" id="category_@counter" data-section-name="@catName">
                                            <div class="heading-icon-container">
                                                @if (!string.IsNullOrEmpty(catIcon))
                                                {
                                                    <image class="heading-icon" src="@catIcon"></image>
                                                }
                                                <h2 class="heading">@catName</h2>
                                            </div>

                                            <div class="products-container">


                                                @foreach (var product in sectionItems)
                                                {
                                                    var productName = product.Content.Value<string>("itemName") ?? "";
                                                    var productDesc = product.Content.Value<string>("itemDescription") ?? "";
                                                    var productPhotos = product.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                                    var alias = product.Content.ContentType.Alias;
                                                    decimal originalPrice = product.Content.Value<decimal>("originalPrice");
                                                    string discountType = product.Content.Value<string>("discountType") ?? "";
                                                    bool hasVariations = false;
                                                    bool activateDiscount = product.Content.Value<bool>("activateDiscount");
@*                                                     var productUdi = product.ContentUdi;
 *@
                                                    var productKey = product.Content.Key;
                                                    

                                                    decimal discountAmount = product.Content.Value<decimal>("discountAmount");
                                                    decimal finalPrice = originalPrice;

                                                    var hasPrice = originalPrice > 0;


                                                    var className = "";
                                                    if (string.IsNullOrEmpty(productDesc))
                                                    {
                                                        className = "no-desc";
                                                    }

                                                    if (discountType == "Final Price")
                                                    {
                                                        finalPrice = discountAmount;
                                                    }
                                                    else if (discountType == "Fixed Price")
                                                    {
                                                        finalPrice = originalPrice - discountAmount;

                                                    }
                                                    else if (discountType == "Percentage")
                                                    {
                                                        var discountPercentage = (discountAmount / 100) * (originalPrice / 1);
                                                        finalPrice = Math.Ceiling((finalPrice - discountPercentage) * 20) / 20;

                                                    }



                                                    @if (alias == "beerBeverage")
                                                    {
                                                        if (product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations")?.Any() ?? false)
                                                        {
                                                            hasVariations = true;
                                                        }

                                                    }

                                                    var mainPhoto = "";
                                                    @if (productPhotos?.Any() ?? false)
                                                    {
                                                        mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";
                                                    }

                                                    var variationsCounter = 0;

                                                    if (hasVariations == false)
                                                    {
                                                        <div class="product__container">
                                                            <div class="product"
                                                                 data-section-key="@sectionKey.ToString()"
                                                                 data-product-key="@productKey.ToString()"
                                                                 data-category="category_@counter"
                                                                 data-real-cat-index="@counter"
                                                                 data-product-index="@productIndex"
                                                                 data-category-name="@catName"
                                                                 data-name="@productName"
                                                                 data-desc="@productDesc"
                                                                 data-original-price="@originalPrice.ToString("F2")&#8364"
                                                                 data-final-price="@finalPrice.ToString("F2")&#8364"
                                                                 data-activate-discount="@activateDiscount"
                                                                 data-photo="@mainPhoto"
                                                                 data-has-price="@hasPrice"
                                                                 role="button">

                                                                @{
                                                                    productIndex++;
                                                                }

                                                                <div class="text-photo-container">
                                                                    <div class="product-info @className">

                                                                        <div class="product-text">

                                                                            <h3>@productName</h3>
                                                                            @if (!string.IsNullOrEmpty(productDesc))
                                                                            {
                                                                                <p>@productDesc</p>
                                                                            }
                                                                        </div>

                                                                        <div class="product-price">
                                                                            @if (!string.IsNullOrEmpty(discountType) && activateDiscount)
                                                                            {


                                                                                <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                            }
                                                                            else
                                                                            {
                                                                                <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                            }
                                                                        </div>




                                                                    </div>
                                                                    @if (!string.IsNullOrEmpty(mainPhoto))
                                                                    {
                                                                        <div class="product-photo-container">
                                                                            <img src="@mainPhoto" class="product-photo">
                                                                        </div>
                                                                    }

                                                                </div>

                                                                @if (alias == "mlBeerVariation")
                                                                {
                                                                    decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                    int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                    int? ml = product.Content.Value<int>("millilitre");

                                                                    <div class="tags-container" data-filters-type="beer">

                                                                        <span class="tag" data-abv="@alc" style="background-color:@themeColor">
                                                                            @alc% ALC
                                                                        </span>
                                                                        <span class="tag" data-ibu="@ibu" style="background-color:@themeColor">
                                                                            @ibu IBU
                                                                        </span>


                                                                    </div>
                                                                }
                                                                else if (alias == "generalAlcoholicBeverage")
                                                                {
                                                                    decimal? alc = product.Content.Value<decimal>("alcohol");

                                                                    <div class="tags-container" data-filters-type="beer">

                                                                        <span class="tag" data-abv="@alc" style="background-color:@themeColor">
                                                                            @alc% ALC
                                                                        </span>
                                                                        @*                                                      <span class="tag" data-ibu="@ibu">
                                            @ibu IBU
                                            </span> *@


                                                                    </div>
                                                                }
                                                                else if (alias == "wineBeverage")
                                                                {
                                                                    decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                    int? ml = product.Content.Value<int>("millilitre");

                                                                    <div class="tags-container" data-filters-type="beer">

                                                                        <span class="tag" data-abv="@alc" style="background-color:@themeColor">
                                                                            @alc% ALC
                                                                        </span>
                                                                        @*                                                      <span class="tag" data-ibu="@ibu">
                                            @ibu IBU
                                            </span> *@


                                                                    </div>

                                                                }
                                                                else if (alias == "cocktailBeverage")
                                                                {
                                                                    var spiciness = product?.Content?.Value("spiciness")?.ToString() ?? "";

                                                                    if (spiciness != null && spiciness != "0" && spiciness != "")
                                                                    {
                                                                        <div class="tags-container" data-filters-type="beer">

                                                                            <span class="tag" data-spiciness="@spiciness" data-spicy="true" style="background-color:@themeColor">
                                                                                @if (spiciness == "1")
                                                                                {
                                                                                    <i class="fa fa-pepper-hot"></i>
                                                                                }
                                                                                else if (spiciness == "2")
                                                                                {
                                                                                    <i class="fa fa-pepper-hot"></i>
                                                                                    <i class="fa fa-pepper-hot"></i>

                                                                                }
                                                                                else if (spiciness == "3")
                                                                                {
                                                                                    <i class="fa fa-pepper-hot"></i>
                                                                                    <i class="fa fa-pepper-hot"></i>
                                                                                    <i class="fa fa-pepper-hot"></i>

                                                                                }
                                                                            </span>

                                                                        </div>
                                                                    }

                                                                }
                                                                else if(alias == "foodItem")
                                                                {
                                                                    var filters = product?.Content?.Value<IEnumerable<string>>("foodFIlters")?? null;
                                                                    var spiciness = product?.Content?.Value("spiciness")?.ToString() ?? "";

                                                                    if ((spiciness != null && spiciness != "0" && spiciness != "") ||
                                                                    (filters?.Any() ?? false))
                                                                    {
                                                                        <div class="tags-container" data-filters-type="food">

                                                                            @if(filters?.Any() ?? false)
                                                                            {
                                                                                @foreach (var item in filters)
                                                                                {
                                                                                    <span class="tag" data-filter="@item" style="background-color:@themeColor">
                                                                                        @item
                                                                                    </span>

                                                                                }
                                                                            }
                                                                            @if (spiciness != null && spiciness != "0" && spiciness != "")
                                                                            {
                                                                                <span class="tag" data-spiciness="@spiciness" data-spicy="true" style="background-color:@themeColor">

                                                                                    @if (spiciness == "1")
                                                                                    {
                                                                                        <i class="fa fa-pepper-hot"></i>
                                                                                    }
                                                                                    else if (spiciness == "2")
                                                                                    {
                                                                                        <i class="fa fa-pepper-hot"></i>
                                                                                        <i class="fa fa-pepper-hot"></i>

                                                                                    }
                                                                                    else if (spiciness == "3")
                                                                                    {
                                                                                        <i class="fa fa-pepper-hot"></i>
                                                                                        <i class="fa fa-pepper-hot"></i>
                                                                                        <i class="fa fa-pepper-hot"></i>

                                                                                    }
                                                                                </span>
                                                                            }



                                                                        </div>
                                                                    }
                                                                }
                                                                else if (alias == "nonAlcoholicDrink")
                                                                {

                                                                    var millilitre = product?.Content?.Value("millilitre")?.ToString() ?? "";
                                                                    @if (millilitre != null && millilitre != "0" && millilitre != "")
                                                                    {
                                                                        <div class="tags-container" data-filters-type="nonAlcholicDrink">

                                                                        <span class="tag" data-ml="@millilitre" style="background-color:@themeColor">
                                                                            @millilitre ml                                            
                                                                        </span>

                                                                        </div>

                                                                    }

                                                                }
                                                            </div>

                                                        </div>

                                                        @if (activateDiscount && finalPrice > 0 && finalPrice > biggestPrice)
                                                        {
                                                            biggestPrice = finalPrice;

                                                        }
                                                        else if (originalPrice > biggestPrice)
                                                        {
                                                            biggestPrice = originalPrice;
                                                        }

                                                        if (smallestPrice == 0)
                                                        {
                                                            if (activateDiscount && finalPrice > 0)
                                                            {
                                                                smallestPrice = finalPrice;
                                                            }
                                                            else
                                                            {
                                                                smallestPrice = originalPrice;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (activateDiscount && finalPrice > 0)
                                                            {
                                                                if (finalPrice < smallestPrice)
                                                                {
                                                                    smallestPrice = finalPrice;

                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (originalPrice < smallestPrice)
                                                                {
                                                                    smallestPrice = finalPrice;

                                                                }
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        IEnumerable<BlockListItem> variations = null;

                                                        <div class="product">
                                                            <div class="text-photo-container">
                                                                <div class="product-text">
                                                                    <h3>@productName</h3>
                                                                    @if (!string.IsNullOrEmpty(productDesc))
                                                                    {
                                                                        <p>@productDesc</p>
                                                                    }

                                                                    <div class="swiper-container tabs-buttons">
                                                                        <div class="swiper-wrapper">
                                                                            @if (alias == "mlBeerVariation")
                                                                            {
                                                                                decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                                int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                                int? mainMl = product.Content.Value<int>("millilitre");
                                                                                variations = product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations");

                                                                                <div class="swiper-slide active-tab">@mainMl ml</div>

                                                                                @foreach (var item in variations)
                                                                                {
                                                                                    var ml = item.Content.Value<decimal>("millilitre");
                                                                                    <div class="swiper-slide">@ml ml</div>
                                                                                }

                                                                            }


                                                                        </div>
                                                                        <!--   <div class="swiper-scrollbar"></div> -->
                                                                    </div>

                                                                    <div class="swiper-container tabs-content">
                                                                        <div class="swiper-wrapper">

                                                                            @if (alias == "mlBeerVariation")
                                                                            {
                                                                                <div class="swiper-slide swiper-slide-active">
                                                                                    @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                                    {

                                                                                        <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                                    }
                                                                                </div>

                                                                                @foreach (var item in variations)
                                                                                {
                                                                                    decimal variationOriginalPrice = item.Content.Value<decimal>("originalPrice");
                                                                                    string variationDiscountType = item.Content.Value<string>("discountType") ?? "";

                                                                                    @if (!string.IsNullOrEmpty(discountType))
                                                                                    {
                                                                                        decimal vDiscountAmount = item.Content.Value<decimal>("discountAmount");

                                                                                        decimal vFinalPrice = variationOriginalPrice;

                                                                                        if (discountType == "Final Price")
                                                                                        {
                                                                                            vFinalPrice = vDiscountAmount;
                                                                                        }
                                                                                        else if (discountType == "Fixed Price")
                                                                                        {
                                                                                            vFinalPrice = variationOriginalPrice - vDiscountAmount;

                                                                                        }
                                                                                        else if (discountType == "Percentage")
                                                                                        {
                                                                                            var discountPercentage = (vDiscountAmount / 100) * (originalPrice / 1);
                                                                                            vFinalPrice = Math.Ceiling((vFinalPrice - discountPercentage) * 20) / 20;

                                                                                        }

                                                                                        <div class="swiper-slide">
                                                                                            <p class="final-price has-discount">@vFinalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>
                                                                                        </div>


                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <div class="swiper-slide">
                                                                                            <p class="final-price">@variationOriginalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                                        </div>
                                                                                    }


                                                                                }

                                                                            }

                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                @if (!string.IsNullOrEmpty(mainPhoto))
                                                                {
                                                                    <div class="product-photo-container">
                                                                        <img src="@mainPhoto" class="product-photo">
                                                                    </div>
                                                                }

                                                            </div>

                                                            @if (alias == "mlBeerVariation")
                                                            {
                                                                decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                int? ml = product.Content.Value<int>("millilitre");

                                                                <div class="tags-container" data-filters-type="beer">

                                                                    <span class="tag" data-abv="@alc">
                                                                        @alc% ALC
                                                                    </span>
                                                                    <span class="tag" data-ibu="@ibu">
                                                                        @ibu IBU
                                                                    </span>


                                                                </div>
                                                            }
                                                        </div>

                                                    }
                                                }

                                                @if (outOfStockItems?.Any() ?? false)
                                                {

                                                    <div class="out-of-stock-items collapsed" data-index="@outOfStockCounter" data-bs-toggle="collapse" href="#out-of-stock-section-@counter" role="button" aria-expanded="false" aria-controls="out-of-stock-section-@counter">
                                                        <span class="num-not-available">@outOfStockItems.Count()</span>
                                                        <span class="not-available-text">@(Umbraco.GetDictionaryValue("OutOfStockProducts") ?? "")</span>
                                                        <span class="dropdown-icon">
                                                            <i class="fas fa-chevron-down" aria-hidden="true"></i>
                                                        </span>

                                                    </div>


                                                    outOfStockCounter++;



                                                    <div class="collapse" id="out-of-stock-section-@counter">
                                                        <div class="out-of-stock-container">
                                                            <div class="out-of-stock-swiper">
                                                                <div class="swiper-wrapper">
                                                                    @foreach (var item in outOfStockItems)
                                                                    {
                                                                        var productName = item.Content.Value<string>("itemName") ?? "";
                                                                        var productDesc = item.Content.Value<string>("itemDescription") ?? "";
                                                                        var productPhotos = item.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                                                        var alias = item.Content.ContentType.Alias;
                                                                        decimal originalPrice = item.Content.Value<decimal>("originalPrice");
                                                                        var className = "";
                                                                        if (string.IsNullOrEmpty(productDesc))
                                                                        {
                                                                            className = "no-desc";
                                                                        }

                                                                        <div class="swiper-slide">
                                                                            <div class="out-of-stock-product">

                                                                                <div class="text-photo-container out-of-stock">
                                                                                    <div class="product-info @className out-of-stock">

                                                                                        <div class="product-text">

                                                                                            <h3>@productName</h3>
                                                                                            @if (!string.IsNullOrEmpty(productDesc))
                                                                                            {
                                                                                                <p>@productDesc</p>
                                                                                            }
                                                                                        </div>

                                                                                        <div class="product-price">
                                                                                            <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                                        </div>




                                                                                    </div>
                                                                                    @if (productPhotos?.Any() ?? false)
                                                                                    {
                                                                                        var mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                                                        <div class="product-photo-container">
                                                                                            <img src="@mainPhoto" class="product-photo">
                                                                                        </div>
                                                                                    }

                                                                                </div>


                                                                            </div>

                                                                            <style>
                                                                                .out-of-stock-product:after {
                                                                                    content: "OUT OF STOCK";
                                                                                    display: flex;
                                                                                    justify-content: center;
                                                                                    align-items: center;
                                                                                    position: absolute;
                                                                                    left: 30px;
                                                                                    top: 0;
                                                                                    width: 100%;
                                                                                    height: .9em;
                                                                                    background-color: @themeColor;
                                                                                    transform: rotate(45deg);
                                                                                    opacity: 70%;
                                                                                    margin: 50px;
                                                                                    color: white;
                                                                                    font-size: 1.4rem;
                                                                                }
                                                                            </style>
                                                                        </div>


                                                                    }


                                                                </div>

                                                                <div class="swiper-pagination"></div>

                                                                @*                                                         <div class="swiper-scrollbar"></div>
                                            *@
                                                                @*                                                             <div class="swiper-button-prev"></div>
                                            <div class="swiper-button-next"></div>  *@


                                                            </div>
                                                        </div>

                                                    </div>

                                                }
                                            </div>

                                        </div>
                                    }


                                }
                                else
                                {
                                    var subSections = section.Content.Value<IEnumerable<BlockListItem>>("subSections");
                                    if (subSections?.Any() ?? false)
                                    {
                                        var subCount = 0;
                                        var firstItemCounter = 0;

                                        <div class="category" id="category_@counter">
                                            <div class="heading-icon-container">
                                                @if (!string.IsNullOrEmpty(catIcon))
                                                {
                                                    <image class="heading-icon" src="@catIcon"></image>
                                                }
                                                <h2 class="heading">@catName</h2>
                                            </div>


                                            @foreach (var subSection in subSections.Where(x => x.Content.Value<bool>("hide") == false))
                                            {
                                                firstItemCounter++;
                                                subCount++;
                                                var sectionItems = subSection.Content.Value<IEnumerable<BlockListItem>>("sectionItems");
                                                var link = "cat_" + counter + "_sub_" + subCount;

                                                if (sectionItems?.Any() ?? false)
                                                {
                                                    bool hideName = subSection.Content.Value<bool>("hideName");

                                                    if (!hideName)
                                                    {
                                                        var subSectionName = subSection.Content.Value<string>("subSectionName") ?? "";

                                                        var borderClass = "";
                                                        if (firstItemCounter == 1)
                                                        {
                                                            borderClass = "no-top-border";
                                                        }

                                                        <div class="sub-cat-name-container @borderClass" id="@link">
                                                            <div class="border-container">
                                                                <h2 class="heading">@subSectionName</h2>

                                                            </div>
                                                        </div>

                                                    }
                                                    else
                                                    {
                                                        <div class="sub-cat-empty">
                                                        </div>
                                                    }



                                                    <div class="products-container">

                                                        @foreach (var product in sectionItems)
                                                        {
                                                            var productName = product.Content.Value<string>("itemName") ?? "";
                                                            var productDesc = product.Content.Value<string>("itemDescription") ?? "";
                                                            var productPhotos = product.Content.Value<IEnumerable<IPublishedContent>>("itemPhotos");
                                                            var alias = product.Content.ContentType.Alias;
                                                            decimal originalPrice = product.Content.Value<decimal>("originalPrice");
                                                            string discountType = product.Content.Value<string>("discountType") ?? "";
                                                            bool hasVariations = false;

                                                            decimal discountAmount = product.Content.Value<decimal>("discountAmount");
                                                            decimal finalPrice = originalPrice;

                                                            if (discountType == "Final Price")
                                                            {
                                                                finalPrice = discountAmount;
                                                            }
                                                            else if (discountType == "Fixed Price")
                                                            {
                                                                finalPrice = originalPrice - discountAmount;

                                                            }
                                                            else if (discountType == "Percentage")
                                                            {
                                                                var discountPercentage = (discountAmount / 100) * (originalPrice / 1);
                                                                finalPrice = Math.Ceiling((finalPrice - discountPercentage) * 20) / 20;

                                                            }



                                                            @if (alias == "mlBeerVariation")
                                                            {
                                                                if (product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations")?.Any() ?? false)
                                                                {
                                                                    hasVariations = true;
                                                                }



                                                            }

                                                            var variationsCounter = 0;

                                                            var mainPhoto = "";
                                                            @if (productPhotos?.Any() ?? false)
                                                            {
                                                                mainPhoto = productPhotos?.FirstOrDefault()?.MediaUrl() ?? "";

                                                            }

                                                            if (hasVariations == false)
                                                            {
                                                                <div class="product"
                                                                     data-name="@productName"
                                                                     data-desc="@productDesc"
                                                                     data-original-price="@originalPrice"
                                                                     data-final-price="@finalPrice">

                                                                    <div class="text-photo-container">
                                                                        <div class="product-text">
                                                                            <h3>@productName</h3>
                                                                            @if (!string.IsNullOrEmpty(productDesc))
                                                                            {
                                                                                <p>@productDesc</p>
                                                                            }

                                                                            @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                            {


                                                                                <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                            }
                                                                            else
                                                                            {
                                                                                <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                            }

                                                                        </div>
                                                                        @if (mainPhoto != null)
                                                                        {
                                                                            <div class="product-photo-container">
                                                                                <img src="@mainPhoto" class="product-photo">
                                                                            </div>
                                                                        }

                                                                    </div>

                                                                    @if (alias == "mlBeerVariation")
                                                                    {
                                                                        decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                        int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                        int? ml = product.Content.Value<int>("millilitre");

                                                                        <div class="tags-container" data-filters-type="beer">

                                                                            <span class="tag" data-abv="@alc">
                                                                                @alc% ABV
                                                                            </span>
                                                                            <span class="tag" data-ibu="@ibu">
                                                                                @ibu IBU
                                                                            </span>


                                                                        </div>
                                                                    }
                                                                </div>

                                                            }
                                                            else
                                                            {
                                                                IEnumerable<BlockListItem> variations = null;

                                                                <div class="product">
                                                                    <div class="text-photo-container">
                                                                        <div class="product-text">
                                                                            <h3>@productName</h3>
                                                                            @if (!string.IsNullOrEmpty(productDesc))
                                                                            {
                                                                                <p>@productDesc</p>
                                                                            }

                                                                            <div class="swiper-container tabs-buttons">
                                                                                <div class="swiper-wrapper">
                                                                                    @if (alias == "mlBeerVariation")
                                                                                    {
                                                                                        decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                                        int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                                        int? mainMl = product.Content.Value<int>("millilitre");
                                                                                        variations = product?.Content?.Value<IEnumerable<BlockListItem>>("beerVariations");

                                                                                        <div class="swiper-slide active-tab">@mainMl ml</div>

                                                                                        @foreach (var item in variations)
                                                                                        {
                                                                                            var ml = item.Content.Value<decimal>("millilitre");
                                                                                            <div class="swiper-slide">@ml ml</div>
                                                                                        }

                                                                                    }


                                                                                </div>
                                                                                <!--   <div class="swiper-scrollbar"></div> -->
                                                                            </div>

                                                                            <div class="swiper-container tabs-content">
                                                                                <div class="swiper-wrapper">

                                                                                    @if (alias == "mlBeerVariation")
                                                                                    {
                                                                                        <div class="swiper-slide swiper-slide-active">
                                                                                            @if (!string.IsNullOrEmpty(discountType) && discountType != "Hide")
                                                                                            {

                                                                                                <p class="final-price has-discount">@finalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>

                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <p class="final-price">@originalPrice.ToString("F2")&#8364<span class="original-price"></span></p>

                                                                                            }
                                                                                        </div>

                                                                                        @foreach (var item in variations)
                                                                                        {
                                                                                            decimal variationOriginalPrice = item.Content.Value<decimal>("originalPrice");
                                                                                            string variationDiscountType = item.Content.Value<string>("discountType") ?? "";

                                                                                            @if (!string.IsNullOrEmpty(discountType))
                                                                                            {
                                                                                                decimal vDiscountAmount = item.Content.Value<decimal>("discountAmount");

                                                                                                decimal vFinalPrice = variationOriginalPrice;

                                                                                                if (discountType == "Final Price")
                                                                                                {
                                                                                                    vFinalPrice = vDiscountAmount;
                                                                                                }
                                                                                                else if (discountType == "Fixed Price")
                                                                                                {
                                                                                                    vFinalPrice = variationOriginalPrice - vDiscountAmount;

                                                                                                }
                                                                                                else if (discountType == "Percentage")
                                                                                                {
                                                                                                    var discountPercentage = (vDiscountAmount / 100) * (originalPrice / 1);
                                                                                                    vFinalPrice = Math.Ceiling((vFinalPrice - discountPercentage) * 20) / 20;

                                                                                                }

                                                                                                <div class="swiper-slide">
                                                                                                    <p class="final-price has-discount">@vFinalPrice.ToString("F2")&#8364<span class="original-price">@originalPrice.ToString("F2")&#8364</span></p>
                                                                                                </div>


                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <div class="swiper-slide">
                                                                                                    <p class="final-price">@variationOriginalPrice.ToString("F2")&#8364<span class="original-price"></span></p>
                                                                                                </div>
                                                                                            }


                                                                                        }

                                                                                    }

                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        @if (!string.IsNullOrEmpty(mainPhoto))
                                                                        {
                                                                            <div class="product-photo-container">
                                                                                <img src="@mainPhoto" class="product-photo">
                                                                            </div>
                                                                        }

                                                                    </div>

                                                                    @if (alias == "mlBeerVariation")
                                                                    {
                                                                        decimal? alc = product.Content.Value<decimal>("alcohol");
                                                                        int? ibu = product.Content.Value<int>("internationalBitternessUnits");
                                                                        int? ml = product.Content.Value<int>("millilitre");

                                                                        <div class="tags-container" data-filters-type="beer">

                                                                            <span class="tag" data-abv="@alc">
                                                                                @alc% ABV
                                                                            </span>
                                                                            <span class="tag" data-ibu="@ibu">
                                                                                @ibu IBU
                                                                            </span>


                                                                        </div>
                                                                    }
                                                                </div>

                                                            }
                                                        }

                                                    </div>
                                                }

                                            }

                                        </div>

                                    }

                                }



                            }
                        }



                        <input type="hidden" id="biggestPriceValue" value="@Math.Ceiling(biggestPrice)"/>
                        <input type="hidden" id="smallestPriceValue" value="@Math.Floor(smallestPrice)" />

                        <div id="no-results" style="display: none;">
                            Δεν βρέθηκαν αποτελέσματα αναζήτησης
                        </div>
                    </div>

                </div>

                <section class="tonny">
                    <a href="@home.Url()" target="_blank" class="tony-homepage"><h1>tonny.gr - Digital Menu Solutions</h1></a>
                </section>

            </div>

        </div>



        <input type="hidden" value="@enableOrders" id="enableOrders"/>

        <div class="item-info loading" id="item-info">

            <div class="top-bar">
                <span class="close-container" id="close-item">
                    <i class="fa fa-close"></i>
                </span>
                <div class="wrapper" style="border-bottom: 3px solid @themeColor;">
                    <div class="section-title" id="sectionTitle"><span></span></div>
                    <i class="fa fa-caret-down"></i>
                </div>

            </div>

            <div class="loader-container hide">
                <span class="loader "></span>

            </div>

            

            <div class="gallery-container">
                <div class="gallery">
                    <div class="swiper-container gallery-slider">
                        <div class="swiper-wrapper" id="main-gallery-swiper">
                        </div>

@*                         <div class="pagination-container">
                            <div class="item-swiper-pagination"></div>

                        </div> *@
                        @*                                 <div class="swiper-button-prev"></div>
                        <div class="swiper-button-next"></div> *@
                    </div>

                    
                </div>

                <div class="thumbs-container">

                    @if(enableOrders == "True")
                    {
                        
                    }
                    else
                    {
                        <div class="swiper-container gallery-thumbs">
                            <div class="swiper-wrapper" id="thumbs-gallery-swiper">
                            </div>
                        </div>

                    }


                </div>
            </div>


        </div>

        <div id="itemsCategories" >
            <div class="categories-exit">
                <span class="close-container">

                    <span class="close-area" id="closeCategoriesOverlay">
                        <i class="fa fa-close close-icon"> </i>
                    </span>
@*                     <span class="brand-name">
                        Tonny - Παρουσιαστικό
                    </span> *@
                </span>
                <div class="wraper">
                    <ul class="categories-container" id="categoriesOverlay">
                    </ul>
                </div>

            </div>

        </div>



        @{
            var events = Model?.Value<IEnumerable<BlockListItem>>("events");
            var brandName = Model?.Value<string>("brandName") ?? "";

        }

        <div id="brand-info-content">
            <div class="brand-info-inner">
                <span class="close-container">

                    <span class="close-area" id="close-info">
                        <i class="fa fa-chevron-left close-icon"></i>
                    </span>
                    <span class="brand-name">
                        @brandName
                    </span>
                </span>

                @if (events?.Any() ?? false)
                {
                    events = events.Where(x => !x.Content.Value<bool>("hide") && x.Content.Value<DateTime>("eventEnd") > DateTime.Now);


                    if (events?.Any() ?? false)
                    {
                        <div class="info-item-container">
                           
                            <h3 class="s-title">
                                @(Umbraco.GetDictionaryValue("UpcomingEvents") ?? "")
                            </h3>

                            <div class="border-container">
                                <div class="events-swiper">

                                    <div class="swiper-wrapper">
                                        @foreach (var e in events)
                                        {
                                            string eventName = e?.Content?.Value<string>("eventName") ?? "";
                                            string eventDesc = e?.Content?.Value<string>("eventDescription") ?? "";
                                            var eventPhoto = e?.Content?.Value<IPublishedContent>("eventPhoto")?.MediaUrl() ?? "";
                                            var eventStart = e?.Content?.Value<DateTime>("eventStart");
                                            var eventEnd = e?.Content?.Value<DateTime>("eventEnd");
                                            var cancelledClass = "";
                                            if (e?.Content?.Value<bool>("cancelled") == true)
                                            {
                                                cancelledClass = "cancelled";
                                            }
                                            @if (!string.IsNullOrEmpty(eventPhoto))
                                            {
                                                <div class="swiper-slide event @cancelledClass">
                                                    <div class="photo-container">
                                                        <img src="@eventPhoto" class="event-photo" />
                                                    </div>

                                                    <div class="event-info">
                                                        @if (eventStart != null && eventEnd != null)
                                                        {
                                                            <div class="event-time">
                                                                <span class="event-start">
                                                                    @eventStart?.ToString("ddd, dd MMM HH:mm")
                                                                </span>
                                                                @Html.Raw("<p> &nbsp; - &nbsp; </p>")
                                                                <span class="event-end">
                                                                    @eventEnd?.ToString("ddd, dd MMM HH:mm")
                                                                </span>
                                                            </div>
                                                            <div class="event-about">
                                                                <span class="event-name">@eventName</span>
                                                                <span class="event-desc">@Html.Raw(eventDesc)</span>
                                                            </div>

                                                        }

                                                    </div>
                                                </div>
                                            }

                                        }




                                    </div>
                                    @*                                 <div class="swiper-pagination"></div>
                            *@
                                </div>

                            </div>


                        </div>

                    }

                }

                @{
                    bool showHours = (Model?.Value<bool>("showHours") ?? false);
                    var locations = Model?.Value<IEnumerable<BlockListItem>>("locations");
                    var contacts = Model?.Value<IEnumerable<BlockListItem>>("contacts");
                    var googleMapsLink = Model?.Value<Link>("googleMapsLink")?.Url ?? "";
                    var about = Model?.Value<string>("about") ?? "";
                    var map = Model?.Value<string>("mapCode") ?? "";
                    var hideMap = Model?.Value<bool>("hideMap") ?? true;
                }

                @if (showHours == true)
                {
                    var standardHours = Model?.Value<IEnumerable<OpenOrClosed.Core.ViewModels.DaysViewModel>>("standardHours");
                    @*                 var specialHours = Model?.Value <IEnumerable<OpenOrClosed.Core.ViewModels.SpecialDaysViewModel>>("specialBusinessHours");
                *@
                    <div class="info-item-container">
                        <div class="title-tooltip">
                            <h3 class="s-title  ">
                                @(Umbraco.GetDictionaryValue("OpeningHours") ?? "")
                            </h3>
                        </div>


                        @if (standardHours != null)
                        {
                            <div class="border-container">

                                <table class="table table-striped table table-bordered opening-hours">
                                    <thead>
                                        <tr>
                                            <th scope="col">@(Umbraco.GetDictionaryValue("Day")??"")</th>
                                            <th scope="col">@(Umbraco.GetDictionaryValue("Hours")??"")</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table table-striped">

                                        @foreach (var day in standardHours)
                                        {
                                            var dayName = "";

                                            if (day != null)
                                            {

                                                

                                                <tr>
                                                    @if (day.DayOfTheWeek == "Monday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Monday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Tuesday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Tuesday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Wednesday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Wednesday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Thursday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Thursday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Friday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Friday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Saturday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Saturday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }
                                                    else if (day.DayOfTheWeek == "Sunday")
                                                    {
                                                        dayName = @Umbraco.GetDictionaryValue("Sunday") ?? "";
                                                        <td>
                                                            @dayName
                                                        </td>
                                                    }



                                                    @if (day.IsOpen)
                                                    {
                                                        foreach (var hours in day.HoursOfBusiness)
                                                        {
                                                            <td class="open-text">
                                                                @if (hours.OpensAt != null && hours.ClosesAt != null)
                                                                {

                                                                    @hours?.OpensAt?.ToString("HH:mm") <text> - </text>

                                                                    @hours?.ClosesAt?.ToString("HH:mm") <br />
                                                                }

                                                            </td>

                                                        }
                                                    }
                                                    else
                                                    {
                                                        var closed = @Umbraco.GetDictionaryValue("Closed") ?? "";
                                                        <td class="closed-text">@closed</td>
                                                    }
                                                </tr>
                                            }

                                        }

                                    </tbody>
                                </table>
                            </div>
                        }



                    </div>


                }

                @if ((locations?.Any() ?? false) || (contacts?.Any() ?? false))
                {
                    var contactText = Umbraco.GetDictionaryValue("Contact") ?? "";

                    <div class="info-item-container">
                        <h3 class="s-title">
                            @(Umbraco.GetDictionaryValue("Contact") ?? "")
                        </h3>

                        <div class="border-container">

                            <div class="address-info">
                                @foreach (var location in locations)
                                {
                                    var locTitle = location?.Content?.Value<string>("type");
                                    var locText = location?.Content?.Value<string>("text");

                                    <div class="location-container">

                                        @if (!string.IsNullOrEmpty(locTitle))
                                        {
                                            <span class="location-title">@locTitle</span>

                                        }
                                        @if (!string.IsNullOrEmpty(locText))
                                        {
                                            <a class="location-text" href="@googleMapsLink" target="_blank">
                                                <i class="fa fa-map-pin" aria-hidden="true"></i>
                                                <span class="location">@locText</span>
                                                @*                                         <i class="fa fa-external-link" aria-hidden="true"></i>
                                    *@
                                            </a>

                                        }

                                    </div>

                                }


                                @foreach (var contact in contacts)
                                {
                                    var conTitle = contact?.Content?.Value<string>("type");
                                    var conText = contact?.Content?.Value<string>("text");

                                    <div class="contacts-container">

                                        @if (!string.IsNullOrEmpty(conTitle))
                                        {
                                            <span class="contact-title">@conTitle</span>

                                        }
                                        @if (!string.IsNullOrEmpty(conText))
                                        {
                                            <a class="contact-text" href="tel:@conText" target="_blank">
                                                <i class="fa fa-phone" aria-hidden="true"></i>
                                                <span class="contact">@conText</span>
                                                @*                                             <i class="fa fa-external-link" aria-hidden="true"></i>
                                    *@
                                            </a>

                                        }

                                    </div>

                                }
                            </div>

                        </div>

                    </div>
                }

                @if(!string.IsNullOrEmpty(map) && !hideMap)
                {
                    @Html.Raw(map);
                }

                @*     @if(!string.IsNullOrEmpty(about))
                {
                <div class="info-item-container">
                <h3 class="s-title">
                Σχετικά
                </h3>

                <div class="border-container">
                <h5 class="about">@about</h5>
                </div>
                </div>

                } *@

            </div>


        </div>

        <div class="search-page-container"></div>
    </div>

    @if(isDemo)
    {
        <div class="is__demo" id="isDemo"><span class="text">@(Umbraco.GetDictionaryValue("DemoText"))</span><span class="close-container" id="closeDemo"><i class="fa fa-close"></i></span></div>

    }

    <style>
        .is__demo {
            background-color: @themeColor;
        }
    </style>
</div>


